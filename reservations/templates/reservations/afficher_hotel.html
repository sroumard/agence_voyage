{% extends "base.html" %}

{% block title %}
    Carte des Hôtels
{% endblock %}

{% block content %}
    <h2>Carte des Hôtels</h2>
    <div id="map"></div>

    <script>
        // Initialisation de la carte
        var map = L.map('map').setView([48.8566, 2.3522], 13); // Coordonnées de Paris

        // Ajouter les tuiles OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors',
            maxZoom: 19,
        }).addTo(map);

        // Ajouter les hôtels depuis le backend
        var hotels = {{ hotels|safe }};  // Données passées depuis la vue Django

        hotels.forEach(hotel => {
            if (hotel.lat && hotel.lon) {
                L.marker([hotel.lat, hotel.lon])
                    .addTo(map)
                    .bindPopup(`Hôtel : ${hotel.tags.name || 'Nom inconnu'}`);
            }
        });
    </script>
{% endblock %}
